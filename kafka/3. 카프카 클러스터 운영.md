# 카프카 클러스터 운영

### 카프카 클러스터 운영 방법

![카프카 운영 서비스 방식.png](img/section3/카프카%20운영%20서비스%20방식.png)

- 온프레미스
  - 사용자가 전산실 서버에 직접 설치, 운영
  - 초기 도입 비용, 운영 및 관리를 위한 유지보수 비용 발생
  - 오픈소스 카프카 또는 기업용 카프카 설치, 운영


- Iaas(Infrastructure-as-a-Service)
  - 물리/가상 컴퓨팅 리소스 발급 받아서 사용
  - 사용자가 운영체제, 어플리케이션 등을 직접 설정, 배포, 운영
  - AWS와 같은 클라우드 서비스에 오픈소스 카프카 또는 기업용 카프카 설치, 운영
  - 카프카 인력 비용 필요


- Paas(Platform-as-a-Service)
  - 애플리케이션 개발 및 실행 환경 제공
  - 사용자는 컴퓨팅 리소스 관리를 신경쓰지 않아도 됨


- Saas(Software-as-a-Service)
  - 소프트웨어의 배포, 실행을 업체에서 관리
  - 소프트웨어 관리를 업체에 위임하고 기능만 사용 할 수 있음
  - 컨플루언트 클라우드 또는 AWS MSK 가 대표적인 SaaS
  - 다양한 주변 생태계(ksqlDB, 모니터링 도구 등)를 옵션 제공
  - 서비스 제공 비용 필요

***
### 카프카를 직접 설치, 운영하는 경우

- 컨플루언트에 카프카 에서는 아래와 같이 설정 하는 것을 추천 
- 메모리 : 32GB 머신에 힙 메모리 6GB 설정, 나머지는 OS 페이지 캐시 영역으로 활용
- CPU : 24core, SSL 보안 설정을 사용할 경우 더 높은 스펙 필요
- 디스크 : RAID 10, NAS 사용 안 됨
- 파일시스템 : XFS 또는 ext4

***
### SaaS 카프카 클라우드 제공 업체

**- 컨플루언트**

- 컨플루언트 클라우드
  - 클라우드 기반 카프카 클러스터
  - 요구사항에 따라 자동으로 늘려주는 클라우드 리소스 제공
  - GCP, AWS 등 클러스터 설치 위치 지정 가능
  - 커넥터, ksqlDB, 스키마 레지스트리 서비스 제공
  - 엔터프라이즈 수준 보안 제공
  - 데이터 적재 제한 없음

- 컨플루언트 플랫폼
  - 사용자가 온프레미스 서버에 직접 설치, 운영
  - 단계뼐 스토리지 기능 제공
  - GUI 기반 모니터링 시스템 제공


**- AWS MSK**

- Apache Kafka 를 AWS 클라우드 에서 제공
- AWS 에서 운영하는 애플리케이션과 쉽게 연동 가능
- 카프카 운영을 위한 대시보드 지원
- 엔터프라이즈 수준 보안 제공

***
### SaaS 카프카 클라우드 장점
- 인프라 관리 효율성 증가
- 모니터링 대시보드 제공
- 엔터프라이즈 수준 보안 설정

***
### SaaS 카프카 클라우드 단점
- 서비스 사용 비용
- 커스텀마이징 제한
- 클라우드 종속성